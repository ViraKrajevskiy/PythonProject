{% extends "base.html" %}
{% load static %}

{% block title %}–ú–æ–∏ –¥–æ—Å–∫–∏ | Online Trello{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <style>
        .board-card {
            transition: transform 0.2s, box-shadow 0.2s;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
        }
        .board-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3) !important;
        }
        .badge-status {
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: bold;
        }
        .badge-my { background: #e3f2fd; color: #0d47a1; }
        .badge-guest { background: #f3e5f5; color: #7b1fa2; }

        .section-title {
            font-size: 1.25rem;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            padding-bottom: 10px;
            margin-top: 30px;
        }
        .btn-delete {
            background: none;
            border: none;
            font-size: 1.1rem;
            opacity: 0.4;
            transition: 0.3s;
        }
        .btn-delete:hover {
            opacity: 1;
            color: #dc3545;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="header-section mb-4 text-white">
        <h2 class="fw-bold m-0 text-shadow">–†–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</h2>
        <p class="opacity-75">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–º–∏ –¥–æ—Å–∫–∞–º–∏</p>
    </div>

    <h4 class="text-white section-title mb-4">
        <span class="translate-text">–ú–æ–∏ –ª–∏—á–Ω—ã–µ –¥–æ—Å–∫–∏</span>
    </h4>
    <div class="row g-4">
        {% for board in boards %}
            {% if board.owner == user %}
            <div class="col-sm-6 col-md-4 col-lg-3">
                <div class="card h-100 board-card border-0 shadow-sm">
                    <a href="{% url 'board_detail' board.id %}" class="board-link p-4 d-flex flex-column align-items-center justify-content-center text-decoration-none" style="min-height: 140px;">
                        <h5 class="card-title m-0 text-dark text-center fw-bold">{{ board.title }}</h5>
                        <div class="mt-2">
                            <span class="badge-status badge-my translate-text">–í–ª–∞–¥–µ–ª–µ—Ü</span>
                        </div>
                    </a>
                    <div class="card-footer bg-transparent border-0 py-2 d-flex justify-content-between align-items-center">
                        <span class="text-muted small">{{ board.created_at|date:"d.m.Y" }}</span>
                        <form action="{% url 'delete_board' board.id %}" method="POST" class="m-0">
                            {% csrf_token %}
                            <button type="submit" class="btn-delete" title="–£–¥–∞–ª–∏—Ç—å" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –¥–æ—Å–∫—É –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ?')">üóëÔ∏è</button>
                        </form>
                    </div>
                </div>
            </div>
            {% endif %}
        {% endfor %}

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="card h-100 border-0" style="background: rgba(255,255,255,0.15); border: 2px dashed rgba(255,255,255,0.4) !important; border-radius: 12px;">
                <div class="card-body p-4">
                    <form action="{% url 'create_board' %}" method="POST">
                        {% csrf_token %}
                        <label class="text-white small fw-bold mb-2 translate-text">–ù–æ–≤–∞—è –¥–æ—Å–∫–∞</label>
                        <input type="text" name="title" class="form-control form-control-sm border-0 mb-3 shadow-none bg-white" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ..." required>
                        <button type="submit" class="btn btn-light btn-sm w-100 fw-bold text-primary shadow-sm translate-text">+ –°–æ–∑–¥–∞—Ç—å</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    {% if boards %}
    <h4 class="text-white section-title mb-4 mt-5">
        <span class="translate-text">–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–Ω–µ</span>
    </h4>
    <div class="row g-4">
        {% for board in boards %}
            {% if board.owner != user %}
            <div class="col-sm-6 col-md-4 col-lg-3">
                <div class="card h-100 board-card border-0 shadow-sm">
                    <a href="{% url 'board_detail' board.id %}" class="board-link p-4 d-flex flex-column align-items-center justify-content-center text-decoration-none" style="min-height: 140px;">
                        <h5 class="card-title m-0 text-dark text-center">{{ board.title }}</h5>
                        <div class="mt-2 text-center">
                            <span class="badge-status badge-guest translate-text">–ì–æ—Å—Ç—å</span>
                            <div class="small text-muted mt-1">–ê–≤—Ç–æ—Ä: {{ board.owner.username }}</div>
                        </div>
                    </a>
                    <div class="card-footer bg-transparent border-0 py-2">
                        <span class="text-muted small">–î–æ–±–∞–≤–ª–µ–Ω–æ: {{ board.created_at|date:"d.m.Y" }}</span>
                    </div>
                </div>
            </div>
            {% endif %}
        {% endfor %}
    </div>
    {% endif %}

{% endblock %}