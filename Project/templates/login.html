{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/login.css' %}">
{% endblock %}

{% block content %}
<div class="auth-wrapper">
    <div class="auth-card">
        <h2>–í—Ö–æ–¥</h2>

        <form method="post" novalidate>
            {% csrf_token %}

            {# –û–±—â–∏–µ –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç) #}
            {% if form.non_field_errors %}
                <div class="alert alert-danger" style="color: #fff; background-color: #eb5a46; padding: 10px; border-radius: 3px; margin-bottom: 15px; font-size: 14px;">
                    {% for error in form.non_field_errors %}
                        {{ error }}
                    {% endfor %}
                </div>
            {% endif %}

            {% for field in form %}
                <div class="auth-field-group">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>

                    {# –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å —Ñ–æ—Ä–º–µ, –µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ –≤ –ø–æ–ª–µ #}
                    {{ field }}

                    {% if "password" in field.name %}
                        <span class="toggle-password" onclick="togglePassword(this, '{{ field.id_for_label }}')">üëÅÔ∏è</span>
                    {% endif %}

                    {# –û—à–∏–±–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ") #}
                    {% if field.errors %}
                        <div class="error-text" style="color: #eb5a46; font-size: 12px; margin-top: 5px;">
                            {{ field.errors|striptags }}
                        </div>
                    {% endif %}
                </div>
            {% endfor %}

            <button type="submit" class="auth-btn">–í–æ–π—Ç–∏</button>
        </form>

        <div class="auth-footer">
            <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="{% url 'register' %}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></p>
        </div>
    </div>
</div>

<script>
/**
 * –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
 */
function togglePassword(btn, inputId) {
    const input = document.getElementById(inputId);
    if (input.type === "password") {
        input.type = "text";
        btn.innerText = "üîí"; // –ò–∫–æ–Ω–∫–∞ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∑–∞–º–∫–∞, –∫–æ–≥–¥–∞ –ø–∞—Ä–æ–ª—å –≤–∏–¥–µ–Ω
    } else {
        input.type = "password";
        btn.innerText = "üëÅÔ∏è"; // –ò–∫–æ–Ω–∫–∞ –≥–ª–∞–∑–∞, –∫–æ–≥–¥–∞ –ø–∞—Ä–æ–ª—å —Å–∫—Ä—ã—Ç
    }
}

// –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –≤–æ –≤—Å–µ –∏–Ω–ø—É—Ç—ã –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã, –µ—Å–ª–∏ –∏—Ö –Ω–µ –ø—Ä–æ–∫–∏–Ω—É–ª Django
document.querySelectorAll('.auth-field-group input').forEach(input => {
    input.classList.add('form-control');
});
</script>
{% endblock %}